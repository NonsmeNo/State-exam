# Активность (Activity). Жизненный цикл активности в Android.

> <span style="background:#fff88f">Активность (Activity)</span> — одна из основных компонентов Android.  
   Это один экран пользовательского интерфейса, с которым пользователь взаимодействует.

Каждый экран приложения обычно реализуется как отдельная активность.  
<font color="#de7802">Например, в приложении андроид:</font>
- Экран входа — одна активность.
- Главный экран — другая активность.
- Экран настроек — третья активность.

Активность можно сравнить с **оконным приложением на Windows** или **с отдельной страницей на сайте.
![[Pasted image 20250525093043.png]]

Активность <u>динамическая</u>, у неё есть собственный жизненный цикл: она может быть создана, приостановлена, возобновлена или уничтожена в зависимости от действий пользователя и состояния системы.



##### <span style="background:rgba(205, 244, 105, 0.55)">Жизненный цикл активности в Android</span>

![[Pasted image 20250525093542.png]]

Каждый раз, когда Activity меняет стадию своей жизни, вызывается один из следующих методов жизненного цикла для класса Activity. 

<font color="#d83931">Запомнить 7 методов!!!</font> <font color="#a5a5a5">(на самом деле все просто, если запомнить картинку)</font>
1. `onCreate()`
	вызывается при инициализации Activity

2. `onStart()`
	вызывается, когда активность уже готова к отображению, и <u>начинает подготовку</u> к взаимодействию с пользователем + <u>выходит на передний экран</u>. 
	После `onStart()` система вызывает `onResume()`

3. `onResume()`
	 здесь активность на переднем плане и взаимодействует с пользователем. Она остаётся такой, пока пользователь куда-нибудь не переключится <font color="#a5a5a5">(например, появился звонок на экране или пользователь нажал "домой")</font>. Тогда вызывается `onPause()`.

4. `onPause()`
	"Активность теряет фокус"
	Вызов этого метода указывает на то, что пользователь покинул приложение. `onPause()` вызывается, когда активность временно приостанавливается. 
	Здесь приостанавливаются действия на экране, которые не должны работать в фоне - например, видео или музыка ставится на паузу, останавливаются анимации. Когда пользователь вернётся, вызовется `onResume()`.

5. `onStop()`
	вызывается, когда открывается другая активность в самом приложении. Тогда, текущая активность полностью скрывается. Позже система может её возобновить через onRestart(), либо уничтожить с помощью onDestroy().

6. `onRestart()`
	вызывается, когда активность возвращается из состояния onStop(), после этого метода вызывается onStart() и цикл повторяется. Этот метод - как подготовка перед повторным запуском активности.

7. `onDestroy()`
	вызывается перед тем, как активность будет окончательно уничтожена. Это может произойти:
	- когда **пользователь закрывает активность** (например, нажимает кнопку "Назад"),
	- или когда **система освобождает память** и удаляет неиспользуемую активность.



###### <font color="#6425d0">как создать активность на Kotlin? </font> (можно не включать в билет)

Вот класс новой активности:
```kotlin
import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity 

class MyBestActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) { 
	    
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_my_best)
    }
}
```

Этот же класс, но с моими подробными комментариями
```kotlin
import android.os.Bundle // это специальный класс чтобы сохранять состояние активности или передавать данные между активностями

import androidx.appcompat.app.AppCompatActivity //это базовый класс для активностей

class MyBestActivity : AppCompatActivity() {
	// Этот метод вызывается системой Android каждый раз, когда создаётся новый экземпляр активности.
    // Например, при первом запуске активности или при её пересоздании после поворота экрана.
    // Параметр savedInstanceState содержит данные для восстановления предыдущего состояния активности, если впервые, то значение будет null
    override fun onCreate(savedInstanceState: Bundle?) { 
	    // Выполняем всю стандартную логику из родительского класса
        super.onCreate(savedInstanceState)
		// Файл activity_my_best.xml — это специальный документ (разметка), где мы рисуем кнопки, текст, картинки и другие элементы, вот тут мы его указываем для нашей новой активности
        setContentView(R.layout.activity_my_best) 
    }
}
```

###### <font color="#6425d0">Как переключаться между активностями?</font>
```kotlin
// В MainActivity, например, в обработчике кнопки

val intent = Intent(this, MyBestActivity::class.java) // Создаём интент (намерение) запустить MyBestActivity
startActivity(intent) // Запускаем MyBestActivity

```

**Intent передаёт информацию системе:**
- Какую именно активность запускать (ее класс).
- Дополнительные данные (параметры), если нужно передать что-то новому экрану.

`startActivity()` принимает **только Intent**, потому что так Android контролирует весь процесс. Это нужно для правильного управления памятью, переходами и жизненным циклом активностей.