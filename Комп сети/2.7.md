# Протокол IP. IP-адресация. Классы адресов. Маски адресов.

#### IP - <font color="#31859b">Internet protocol</font>

<span style="background:rgba(240, 200, 0, 0.2)">Протокол IP</span> - это протокол сетевого уровня <font color="#a5a5a5">(модели OSI)</font>, который отвечает за адресацию <font color="#a5a5a5">(кому отправить данные)</font> и маршрутизацию <font color="#a5a5a5">(выбор пути, по которому отправить)</font> в интернете. 

У каждого устройства в интернете есть <span style="background:rgba(3, 135, 102, 0.2)">IP-адрес</span> - это уникальный числовой идентификатор, который присваивается устройству, подключенному к сети.

`В общем, протокол IP - это как правила дорожного движения, по которым едет машина, чтобы доставить посылку, а IP-адрес это как адрес дома, куда эту посылку надо доставить (а порт можно рассматривать как номер квартиры, то есть какому именно приложению доставляются данные).`

###### <font color="#7030a0">Версии IP-адресов</font>
Существует **2 версии IP-адресов**:
- **IPv4** - старая основная версия.  
    Пример: `192.168.0.1`  
    Состоит из 4 чисел (от 0 до 255), разделённых точками. Всего ~4 млрд адресов.

- **IPv6** — новая версия, сделана из-за нехватки IPv4.  
    Пример: `2001:0db8:85a3:0000:0000:8a2e:0370:7334` 
	Адрес состоит из **8 блоков по 4 цифры** (шестнадцатеричные числа от 0000 до FFFF).
    Очень много адресов — хватит "на всех и навсегда".


###### <font color="#7030a0">Частные и публичные адреса</font>
IP-адреса могут быть <u>частные и публичные</u>:
<font color="#00b0f0">Частные IP-адреса</font> — это адреса, которые используются внутри локальных сетей. Чтобы подключиться к локальной сети достаточно подключиться к одному Wi-Fi. 
Обычно частные IP-адреса начинаются с одного из следующих диапазонов: 
`10.0.0.0 - 10.255.255.255`
`172.16.0.0 – 172.31.255.255`
`192.168.0.0 - 192.168.255.255` 

<font color="#00b0f0">Публичный IP-адрес</font> — это уникальный адрес, который виден в <font color="#d83931">сети интернет</font>.  
Он принадлежит роутеру, и через него все домашние устройства подключенные к локальной сети выходят в интернет. Он может быть: 
- <font color="#00b050">динамический</font> - который выдается роутеру при каждом подключении к интернету, используется для домашнего интернета
- <font color="#00b050">статический</font> - не меняется со временем и используется для серверов, чтобы к ним всегда можно было подключиться.


##### <span style="background:rgba(205, 244, 105, 0.55)">Классы адресов</span>

**Любой IPv4-адрес состоит из двух частей:**
1. **Часть сети (Network)** — показывает, к какой сети принадлежит устройство.
2. **Часть хоста (Host)** — уникальный номер устройства внутри этой сети.

![[Pasted image 20250520234546.png]]
Это помогает устройствам понимать, куда отправлять данные: сначала — в нужную сеть, потом — к конкретному устройству в ней.

<font color="#e36c09">Например:</font> у меня дома есть два устройства, подключенные к одной локальной сети
ноутбук - `192.168.1.1
смартфон - `192.168.1.2`
Здесь `192.168.1` - это сеть, а последнее число - это адрес самого устройства (хоста), 
подключенного к сети.

Раньше адреса версии IPv4 делили <span style="background:#fff88f">на классы</span>, чтобы автоматически понимать:
 Какая часть адреса — это **сеть**
 А какая — **устройство (хост)**

Классов всего 5: **A, B, C, D, E**.
К какому классу принадлежит IP-адрес — определяется по **первым битам первого числа** в адресе.
<font color="#de7802">Например:</font> **класс A** — от **1 до 127**<font color="#7f7f7f"> (здесь первый бит 0, а начиная со 128 уже 1, это уже класс B)</font> → используется для очень больших сетей. Здесь первое число определяет сеть, а последующие три хоста: N.H.H.H
<font color="#00b050">Все классы можно посмотреть в табличке:</font>
![[Pasted image 20250521004919.png]]
Обычно в интернете и локальных сетях используют только классы IP-адресов A, B и C. Классы D и E встречаются реже.  
<font color="#00b050">Класс D</font> предназначен для мультикаста — это способ передачи данных сразу нескольким устройствам одновременно, например, для онлайн-трансляций.
<font color="#0070c0">Класс E </font>зарезервирован для экспериментальных и исследовательских целей и в обычных сетях не используется.


##### <span style="background:rgba(205, 244, 105, 0.55)">Маски адресов</span>

<span style="background:#fff88f">Маска </span> — это специальное число, которое помогает понять, какая часть IP-адреса отвечает за сеть, а какая — за конкретные устройства (хосты) внутри этой сети.

Раньше для разделения части IP-адреса на сеть и устройства использовалось деление на классы A, B, C с фиксированными масками <font color="#a5a5a5">(в таблице можно посмотреть эти маски)</font>. Это было просто, но неудобно, потому что сети могли быть слишком большими или слишком маленькими, а гибкости не было.

Со временем придумали маски подсети, которые позволяют задавать любую длину сетевой части адреса — то есть можно точно указать, сколько бит выделять под сеть, а сколько — под устройства. Это называется **бесклассовая адресация (CIDR)**.
###### Как это записывается?
IP-адрес пишется с маской через слэш
<font color="#c00000">Примеры</font>

1.`192.168.1.0/24` — значит, первые 24 бита — сеть, оставшиеся 8 — хосты.
Тут маска:  255.255.255.0 
<font color="#a5a5a5">(Количество доступных адресов для устройств 256, но вычитаем 2, так как 0 - адрес самой сети, а 255 - широковещательный адрес, их для хостов не используют)</font>

Если нужно сеть поменьше:  
2.`192.168.1.0/26` — первые 26 бит — сеть, оставшиеся 6 — хосты.
Тут маска:  255.255.255.192 
<font color="#a5a5a5">(Количество доступных адресов для устройств 64, но вычитаем 2 как в 1 примере  => 62)</font>
